<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Manajemen Jurusan dan Mata Kuliah</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        :root {
            --primary-color: #4158D0;
            --secondary-color: #C850C0;
            --accent-color: #FFCC70;
            --dark-color: #333;
            --light-color: #f8f9fa;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, var(--accent-color) 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark-color);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin-bottom: 30px;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        h1, h2, h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 3rem;
            background: black;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 40px;;
        }

        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
        }

        .btn, .back-btn {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all var(--transition-speed);
            text-align: center;
            text-decoration: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn:before, .back-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0%;
            height: 100%;
            background: linear-gradient(to left, var(--primary-color), var(--secondary-color));
            transition: all 0.4s;
            z-index: -1;
            border-radius: 50px;
        }

        .btn:hover:before, .back-btn:hover:before {
            width: 100%;
        }

        .btn:hover, .back-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .btn:active, .back-btn:active {
            transform: translateY(1px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        .back-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            padding: 12px 24px;
            font-size: 1rem;
            display: none;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--primary-color);
        }

        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border var(--transition-speed);
            background-color: rgba(255, 255, 255, 0.8);
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 8px rgba(65, 88, 208, 0.4);
        }

        .search-container {
            position: relative;
            margin-bottom: 30px;
        }

        .search-container input {
            padding-left: 40px;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
        }

        .jurusan-list, .matakuliah-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .jurusan-item, .matakuliah-item {
            background: linear-gradient(135deg, #ffffff, #f0f0f0);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all var(--transition-speed);
            position: relative;
            overflow: hidden;
            border-left: 5px solid var(--primary-color);
        }

        .jurusan-item:hover, .matakuliah-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .jurusan-logo {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: 15px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            border-radius: 10px;
            background-color: white;
            padding: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .delete-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #ff3860;
            cursor: pointer;
            font-size: 20px;
            transition: all var(--transition-speed);
            opacity: 0.7;
        }

        .delete-icon:hover {
            transform: scale(1.2);
            opacity: 1;
        }

        .jurusan-details, .matakuliah-details {
            padding: 20px;
            margin-top: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .detail-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .detail-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-color);
        }

        .section {
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease-out;
        }

        /* Animasi */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .animate-fade {
            animation: fadeIn 0.5s ease-out;
        }

        .animate-left {
            animation: slideInLeft 0.5s ease-out;
        }

        .animate-right {
            animation: slideInRight 0.5s ease-out;
        }

        /* Burger Menu */
        .burger-menu {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background-color: var(--primary-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transition: all var(--transition-speed);
        }

        .burger-menu:hover {
            transform: scale(1.1);
        }

        .burger-icon {
            width: 20px;
            height: 16px;
            position: relative;
        }

        .burger-icon span {
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: white;
            transition: all var(--transition-speed);
        }

        .burger-icon span:nth-child(1) {
            top: 0;
        }

        .burger-icon span:nth-child(2) {
            top: 7px;
        }

        .burger-icon span:nth-child(3) {
            top: 14px;
        }

        .burger-open span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .burger-open span:nth-child(2) {
            opacity: 0;
        }

        .burger-open span:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background-color: white;
            z-index: 999;
            box-shadow: 5px 0 15px rgba(0,0,0,0.1);
            transition: left var(--transition-speed);
            padding: 80px 20px 20px;
            overflow-y: auto;
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-title {
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }

        .sidebar-item {
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all var(--transition-speed);
            border-left: 3px solid transparent;
        }

        .sidebar-item:hover {
            background-color: #f0f0f0;
            border-left-color: var(--primary-color);
        }

        .sidebar-item.active {
            background-color: #e0e0ff;
            border-left-color: var(--primary-color);
            font-weight: bold;
        }

        .sidebar-divider {
            height: 1px;
            background-color: #ddd;
            margin: 15px 0;
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-speed);
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Loading Spinner */
        .loading-spinner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            z-index: 1002;
            transform: translateX(150%);
            transition: transform 0.5s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .notification.success {
            background-color: #48c774;
        }

        .notification.error {
            background-color: #ff3860;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* Tabs for Semesters */
        .semester-tabs {
            display: flex;
            overflow-x: auto;
            margin-bottom: 20px;
            padding-bottom: 5px;
        }

        .semester-tab {
            padding: 10px 20px;
            background: linear-gradient(to right, #f0f0f0, #e0e0e0);
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            cursor: pointer;
            transition: all var(--transition-speed);
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .semester-tab:hover {
            background: linear-gradient(to right, #e0e0e0, #d0d0d0);
        }

        .semester-tab.active {
            background: white;
            border-bottom-color: var(--primary-color);
            font-weight: bold;
        }

        .semester-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .semester-content.active {
            display: block;
        }

        /* Upload logo styles */
        .logo-preview {
            width: 150px;
            height: 150px;
            margin: 15px auto;
            border: 2px dashed var(--primary-color);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background-color: #f8f9fa;
        }

        .logo-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .logo-upload-btn {
            display: block;
            margin: 0 auto;
            width: 200px;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .buttons-container {
                flex-direction: column;
                align-items: center;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .jurusan-list, .matakuliah-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Burger Menu -->
    <div class="burger-menu" id="burgerMenu">
        <div class="burger-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <h3 class="sidebar-title">Menu Navigasi</h3>
        <div class="sidebar-item" id="sidebarHome">Halaman Utama</div>
        <div class="sidebar-divider"></div>
        <div class="sidebar-item" id="sidebarInput">Input Data</div>
        <div class="sidebar-item" id="sidebarView">Lihat Data</div>
        <div class="sidebar-divider"></div>
        <h3 class="sidebar-title">Jurusan</h3>
        <div id="jurusanSidebar">
            <!-- Jurusan list will be populated here -->
            <div class="sidebar-item">Memuat data...</div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Container -->
    <div class="container">
        <!-- Main Page -->
        <div id="mainPage" class="animate-fade">
            <h1 class="animate-left">Sistem Manajemen Jurusan dan Mata Kuliah</h1>
            <div class="card animate-right">
                <h2>Selamat Datang</h2>
                <p>Silakan pilih opsi di bawah ini untuk mengelola data jurusan dan mata kuliah.</p>
                <div class="buttons-container">
                    <button class="btn" id="inputBtn">Input Data</button>
                    <button class="btn" id="viewBtn">Lihat Data</button>
                </div>
            </div>
        </div>

        <!-- Input Options Page -->
        <div id="inputOptionsPage" style="display: none;">
            <h1 class="animate-fade">Pilihan Input Data</h1>
            <div class="card animate-left">
                <h2>Silakan Pilih Jenis Input</h2>
                <div class="buttons-container">
                    <button class="btn" id="existingInputBtn">Input Data yang Sudah Ada</button>
                    <button class="btn" id="newJurusanBtn">Input Jurusan Baru</button>
                </div>
            </div>
        </div>

        <!-- New Jurusan Input Page -->
        <div id="newJurusanPage" style="display: none;">
            <h1 class="animate-fade">Input Jurusan Baru</h1>
            <div class="card animate-right">
                <h2>Masukkan Informasi Jurusan</h2>
                <form id="newJurusanForm">
                    <div class="form-group">
                        <label for="namaJurusan">Nama Jurusan</label>
                        <input type="text" id="namaJurusan" placeholder="Contoh: Teknik Informatika" required>
                    </div>
                    <div class="form-group">
                        <label for="kodeJurusan">Kode Jurusan</label>
                        <input type="text" id="kodeJurusan" placeholder="Contoh: TI01" required>
                    </div>
                    <div class="form-group">
                        <label for="fakultasJurusan">Fakultas</label>
                        <input type="text" id="fakultasJurusan" placeholder="Contoh: Fakultas Ilmu Komputer" required>
                    </div>
                    <div class="form-group">
                        <label for="logoJurusan">Logo Jurusan</label>
                        <div class="logo-preview" id="logoPreview">
                            <i class="fas fa-image" style="font-size: 50px; color: #ccc;"></i>
                        </div>
                        <input type="file" id="logoJurusan" accept="image/*" style="display: none;">
                        <button type="button" class="btn logo-upload-btn" id="logoUploadBtn">Pilih Gambar</button>
                    </div>
                    <div class="buttons-container">
                        <button type="submit" class="btn">Simpan Jurusan</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Existing Jurusan Input Page -->
        <div id="existingJurusanPage" style="display: none;">
            <h1 class="animate-fade">Pilih Jurusan yang Sudah Ada</h1>
            <div class="card animate-left">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchJurusan" placeholder="Cari jurusan...">
                </div>
                <div id="jurusanList" class="jurusan-list">
                    <!-- Jurusan list will be populated here -->
                    <div class="jurusan-item animate-fade">
                        <p>Memuat data...</p>
                    </div>
                </div>
                <div id="noJurusanFound" style="display: none; text-align: center; margin-top: 30px;">
                    <h3>Jurusan belum tersedia</h3>
                    <button class="btn" id="noJurusanBtn">Input Jurusan Baru</button>
                </div>
            </div>
        </div>

        <!-- Mata Kuliah Input Page -->
        <div id="mataKuliahInputPage" style="display: none;">
            <h1 class="animate-fade">Input Mata Kuliah</h1>
            <div class="card animate-right">
                <h2 id="selectedJurusanTitle">Input Mata Kuliah untuk Jurusan: <span></span></h2>
                <form id="mataKuliahForm">
                    <div class="form-group">
                        <label for="namaMataKuliah">Nama Mata Kuliah</label>
                        <input type="text" id="namaMataKuliah" placeholder="Contoh: Pemrograman Web" required>
                    </div>
                    <div class="form-group">
                        <label for="semesterMataKuliah">Semester</label>
                        <select id="semesterMataKuliah" required>
                            <option value="">Pilih Semester</option>
                            <option value="1">Semester 1</option>
                            <option value="2">Semester 2</option>
                            <option value="3">Semester 3</option>
                            <option value="4">Semester 4</option>
                            <option value="5">Semester 5</option>
                            <option value="6">Semester 6</option>
                            <option value="7">Semester 7</option>
                            <option value="8">Semester 8</option>
                            <option value="9">Spesialisasi</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sksMataKuliah">SKS</label>
                        <input type="number" id="sksMataKuliah" min="1" max="6" placeholder="Contoh: 3" required>
                    </div>
                    <div class="form-group">
                        <label for="bahanKajian">Bahan Kajian</label>
                        <textarea id="bahanKajian" rows="3" placeholder="Masukkan bahan kajian mata kuliah..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="cpmk">Capaian Pembelajaran Mata Kuliah (CPMK)</label>
                        <textarea id="cpmk" rows="3" placeholder="Masukkan capaian pembelajaran mata kuliah..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="metodePembelajaran">Metode Pembelajaran</label>
                        <textarea id="metodePembelajaran" rows="3" placeholder="Masukkan metode pembelajaran yang digunakan..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="modalitasPembelajaran">Modalitas Pembelajaran</label>
                        <textarea id="modalitasPembelajaran" rows="3" placeholder="Masukkan modalitas pembelajaran yang digunakan..." required></textarea>
                    </div>
                    <div class="buttons-container">
                        <button type="submit" class="btn">Simpan Mata Kuliah</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- View Options Page -->
        <div id="viewOptionsPage" style="display: none;">
            <h1 class="animate-fade">Lihat Data</h1>
            <div class="card animate-left">
                <h2>Cari Jurusan</h2>
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchViewJurusan" placeholder="Cari berdasarkan nama jurusan, kode, atau fakultas...">
                </div>
                <div id="viewJurusanList" class="jurusan-list">
                    <!-- Jurusan list will be populated here -->
                </div>
                <div id="noViewJurusanFound" style="display: none; text-align: center; margin-top: 30px;">
                    <h3>Jurusan tidak ditemukan</h3>
                    <p>Silakan coba dengan kata kunci lain atau input jurusan baru</p>
                </div>
            </div>
        </div>

        <!-- View Jurusan Details Page -->
        <div id="viewJurusanDetailsPage" style="display: none;">
            <h1 class="animate-fade" id="viewJurusanTitle">Jurusan: <span></span></h1>
            <div class="card animate-right">
                <div id="jurusanDetails" class="jurusan-details">
                    <div class="detail-grid">
                        <div class="detail-item animate-left">
                            <div class="detail-title">Kode Jurusan</div>
                            <div id="viewKodeJurusan"></div>
                        </div>
                        <div class="detail-item animate-right">
                            <div class="detail-title">Fakultas</div>
                            <div id="viewFakultasJurusan"></div>
                        </div>
                    </div>
                    <div style="text-align: center; margin: 20px 0;">
                        <img id="viewLogoJurusan" class="jurusan-logo animate-fade" style="width: 120px; height: 120px;" src="" alt="Logo Jurusan">
                    </div>
                </div>

                <h3>Mata Kuliah</h3>
                <div class="semester-tabs" id="semesterTabs">
                    <!-- Semester tabs will be populated here -->
                </div>
                <div id="semesterContent">
                    <!-- Semester content will be populated here -->
                </div>
                <div id="noMataKuliahFound" style="display: none; text-align: center; margin-top: 30px;">
                    <h3>Belum ada mata kuliah</h3>
                    <button class="btn" id="addMataKuliahBtn">Tambah Mata Kuliah</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Back Button -->
    <button class="back-btn" id="backBtn">
        <i class="fas fa-arrow-left"></i> Kembali
    </button>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner" style="display: none;">
        <div class="spinner"></div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // Data storage
        let jurusanData = JSON.parse(localStorage.getItem('jurusanData')) || [];
        let mataKuliahData = JSON.parse(localStorage.getItem('mataKuliahData')) || [];
        let currentJurusan = null;

        // DOM Elements
        const mainPage = document.getElementById('mainPage');
        const inputOptionsPage = document.getElementById('inputOptionsPage');
        const newJurusanPage = document.getElementById('newJurusanPage');
        const existingJurusanPage = document.getElementById('existingJurusanPage');
        const mataKuliahInputPage = document.getElementById('mataKuliahInputPage');
        const viewOptionsPage = document.getElementById('viewOptionsPage');
        const viewJurusanDetailsPage = document.getElementById('viewJurusanDetailsPage');
        const backBtn = document.getElementById('backBtn');
        const burgerMenu = document.getElementById('burgerMenu');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const notification = document.getElementById('notification');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateJurusanSidebar();
            setupEventListeners();
        });

        // Utility Functions
        function showPage(page) {
            // Hide all pages
            mainPage.style.display = 'none';
            inputOptionsPage.style.display = 'none';
            newJurusanPage.style.display = 'none';
            existingJurusanPage.style.display = 'none';
            mataKuliahInputPage.style.display = 'none';
            viewOptionsPage.style.display = 'none';
            viewJurusanDetailsPage.style.display = 'none';

            // Show the requested page
            page.style.display = 'block';

            // Handle back button
            if (page === mainPage) {
                backBtn.style.display = 'none';
            } else {
                backBtn.style.display = 'block';
            }

            // Scroll to top
            window.scrollTo(0, 0);
        }

        function showLoading() {
            loadingSpinner.style.display = 'flex';
        }

        function hideLoading() {
            loadingSpinner.style.display = 'none';
        }

        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = 'notification ' + type;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function toggleSidebar() {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
            burgerMenu.querySelector('.burger-icon').classList.toggle('burger-open');
        }

        function updateJurusanList() {
            const jurusanList = document.getElementById('jurusanList');
            const searchInput = document.getElementById('searchJurusan').value.toLowerCase();
            const noJurusanFound = document.getElementById('noJurusanFound');
            
            jurusanList.innerHTML = '';
            
            if (jurusanData.length === 0) {
                noJurusanFound.style.display = 'block';
                jurusanList.style.display = 'none';
                return;
            }
            
            const filteredJurusan = jurusanData.filter(jurusan => 
                jurusan.nama.toLowerCase().includes(searchInput) || 
                jurusan.kode.toLowerCase().includes(searchInput) || 
                jurusan.fakultas.toLowerCase().includes(searchInput)
            );
            
            if (filteredJurusan.length === 0) {
                noJurusanFound.style.display = 'block';
                jurusanList.style.display = 'none';
                return;
            }
            
            noJurusanFound.style.display = 'none';
            jurusanList.style.display = 'grid';
            
            filteredJurusan.forEach((jurusan, index) => {
                const jurusanItem = document.createElement('div');
                jurusanItem.className = 'jurusan-item animate-fade';
                jurusanItem.style.animationDelay = `${index * 0.1}s`;
                
                jurusanItem.innerHTML = `
                    <img src="${jurusan.logo || '/api/placeholder/80/80'}" alt="Logo ${jurusan.nama}" class="jurusan-logo">
                    <h3>${jurusan.nama}</h3>
                    <p><strong>Kode:</strong> ${jurusan.kode}</p>
                    <p><strong>Fakultas:</strong> ${jurusan.fakultas}</p>
                    <i class="fas fa-times delete-icon" data-id="${jurusan.id}" title="Hapus Jurusan"></i>
                `;
                
                jurusanItem.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('delete-icon')) {
                        selectJurusan(jurusan);
                    }
                });
                
                jurusanList.appendChild(jurusanItem);
            });
            
            // Add event listeners to delete icons
            document.querySelectorAll('.delete-icon').forEach(icon => {
                icon.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const jurusanId = this.getAttribute('data-id');
                    deleteJurusan(jurusanId);
                });
            });
        }

        function updateViewJurusanList() {
            const viewJurusanList = document.getElementById('viewJurusanList');
            const searchInput = document.getElementById('searchViewJurusan').value.toLowerCase();
            const noViewJurusanFound = document.getElementById('noViewJurusanFound');
            
            viewJurusanList.innerHTML = '';
            
            if (jurusanData.length === 0) {
                noViewJurusanFound.style.display = 'block';
                viewJurusanList.style.display = 'none';
                return;
            }
            
            const filteredJurusan = jurusanData.filter(jurusan => 
                jurusan.nama.toLowerCase().includes(searchInput) || 
                jurusan.kode.toLowerCase().includes(searchInput) || 
                jurusan.fakultas.toLowerCase().includes(searchInput)
            );
            
            if (filteredJurusan.length === 0) {
                noViewJurusanFound.style.display = 'block';
                viewJurusanList.style.display = 'none';
                return;
            }
            
            noViewJurusanFound.style.display = 'none';
            viewJurusanList.style.display = 'grid';
            
            filteredJurusan.forEach((jurusan, index) => {
                const jurusanItem = document.createElement('div');
                jurusanItem.className = 'jurusan-item animate-fade';
                jurusanItem.style.animationDelay = `${index * 0.1}s`;
                
                jurusanItem.innerHTML = `
                    <img src="${jurusan.logo || '/api/placeholder/80/80'}" alt="Logo ${jurusan.nama}" class="jurusan-logo">
                    <h3>${jurusan.nama}</h3>
                    <p><strong>Kode:</strong> ${jurusan.kode}</p>
                    <p><strong>Fakultas:</strong> ${jurusan.fakultas}</p>
                `;
                
                jurusanItem.addEventListener('click', function() {
                    viewJurusanDetails(jurusan);
                });
                
                viewJurusanList.appendChild(jurusanItem);
            });
        }

        function updateJurusanSidebar() {
            const jurusanSidebar = document.getElementById('jurusanSidebar');
            
            jurusanSidebar.innerHTML = '';
            
            if (jurusanData.length === 0) {
                jurusanSidebar.innerHTML = '<div class="sidebar-item">Belum ada jurusan</div>';
                return;
            }
            
            jurusanData.forEach(jurusan => {
                const jurusanItem = document.createElement('div');
                jurusanItem.className = 'sidebar-item';
                jurusanItem.textContent = jurusan.nama;
                
                jurusanItem.addEventListener('click', function() {
                    toggleSidebar();
                    viewJurusanDetails(jurusan);
                });
                
                jurusanSidebar.appendChild(jurusanItem);
            });
        }

        function selectJurusan(jurusan) {
            currentJurusan = jurusan;
            document.querySelector('#selectedJurusanTitle span').textContent = jurusan.nama;
            showPage(mataKuliahInputPage);
        }

        function viewJurusanDetails(jurusan) {
            currentJurusan = jurusan;
            
            // Update jurusan details
            document.querySelector('#viewJurusanTitle span').textContent = jurusan.nama;
            document.getElementById('viewKodeJurusan').textContent = jurusan.kode;
            document.getElementById('viewFakultasJurusan').textContent = jurusan.fakultas;
            document.getElementById('viewLogoJurusan').src = jurusan.logo || '/api/placeholder/120/120';
            
            // Generate semester tabs
            const semesterTabs = document.getElementById('semesterTabs');
            semesterTabs.innerHTML = '';
            
            // Create "All" tab
            const allTab = document.createElement('div');
            allTab.className = 'semester-tab active';
            allTab.textContent = 'Semua';
            allTab.dataset.semester = 'all';
            semesterTabs.appendChild(allTab);
            
            // Create semester tabs 1-9
            for (let i = 1; i <= 9; i++) {
                const tab = document.createElement('div');
                tab.className = 'semester-tab';
                tab.textContent = `Semester ${i}`;
                tab.dataset.semester = i;
                semesterTabs.appendChild(tab);
            }
            
            // Add click event to tabs
            document.querySelectorAll('.semester-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.semester-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    displayMataKuliah(this.dataset.semester);
                });
            });
            
            // Display mata kuliah
            displayMataKuliah('all');
            
            showPage(viewJurusanDetailsPage);
        }

        function displayMataKuliah(semester) {
            const semesterContent = document.getElementById('semesterContent');
            const noMataKuliahFound = document.getElementById('noMataKuliahFound');
            
            semesterContent.innerHTML = '';
            
            // Filter mata kuliah for current jurusan
            const jurusanMataKuliah = mataKuliahData.filter(mk => mk.jurusanId === currentJurusan.id);
            
            // Filter by semester if not 'all'
            const filteredMataKuliah = semester === 'all' 
                ? jurusanMataKuliah 
                : jurusanMataKuliah.filter(mk => mk.semester === semester);
            
            if (filteredMataKuliah.length === 0) {
                noMataKuliahFound.style.display = 'block';
                return;
            }
            
            noMataKuliahFound.style.display = 'none';
            
            // Group by semester if showing all
            if (semester === 'all') {
                // Get all semesters
                const semesters = [...new Set(jurusanMataKuliah.map(mk => mk.semester))].sort();
                
                semesters.forEach(sem => {
                    const semesterDiv = document.createElement('div');
                    semesterDiv.className = 'semester-content active animate-fade';
                    
                    const semesterTitle = document.createElement('h3');
                    semesterTitle.textContent = `Semester ${sem}`;
                    semesterTitle.style.marginTop = '30px';
                    semesterDiv.appendChild(semesterTitle);
                    
                    const mataKuliahList = document.createElement('div');
                    mataKuliahList.className = 'matakuliah-list';
                    
                    const semMataKuliah = jurusanMataKuliah.filter(mk => mk.semester === sem);
                    
                    semMataKuliah.forEach((mk, index) => {
                        const mataKuliahItem = createMataKuliahItem(mk, index);
                        mataKuliahList.appendChild(mataKuliahItem);
                    });
                    
                    semesterDiv.appendChild(mataKuliahList);
                    semesterContent.appendChild(semesterDiv);
                });
            } else {
                // Show specific semester
                const semesterDiv = document.createElement('div');
                semesterDiv.className = 'semester-content active animate-fade';
                
                const mataKuliahList = document.createElement('div');
                mataKuliahList.className = 'matakuliah-list';
                
                filteredMataKuliah.forEach((mk, index) => {
                    const mataKuliahItem = createMataKuliahItem(mk, index);
                    mataKuliahList.appendChild(mataKuliahItem);
                });
                
                semesterDiv.appendChild(mataKuliahList);
                semesterContent.appendChild(semesterDiv);
            }
        }

        function createMataKuliahItem(mataKuliah, index) {
            const mataKuliahItem = document.createElement('div');
            mataKuliahItem.className = 'matakuliah-item animate-fade';
            mataKuliahItem.style.animationDelay = `${index * 0.1}s`;
            
            mataKuliahItem.innerHTML = `
                <h3>${mataKuliah.nama}</h3>
                <p><strong>SKS:</strong> ${mataKuliah.sks}</p>
                <div class="detail-item">
                    <div class="detail-title">Bahan Kajian</div>
                    <div>${mataKuliah.bahanKajian}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-title">CPMK</div>
                    <div>${mataKuliah.cpmk}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-title">Metode Pembelajaran</div>
                    <div>${mataKuliah.metodePembelajaran}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-title">Modalitas Pembelajaran</div>
                    <div>${mataKuliah.modalitasPembelajaran}</div>
                </div>
                <i class="fas fa-times delete-icon" data-id="${mataKuliah.id}" title="Hapus Mata Kuliah"></i>
            `;
            
            // Add event listener to delete icon
            mataKuliahItem.querySelector('.delete-icon').addEventListener('click', function(e) {
                e.stopPropagation();
                const mataKuliahId = this.getAttribute('data-id');
                deleteMataKuliah(mataKuliahId);
            });
            
            return mataKuliahItem;
        }

        function saveJurusan(jurusan) {
            showLoading();
            
            // Simulate server delay
            setTimeout(() => {
                // Generate ID if new jurusan
                if (!jurusan.id) {
                    jurusan.id = Date.now().toString();
                    jurusanData.push(jurusan);
                } else {
                    // Update existing jurusan
                    const index = jurusanData.findIndex(j => j.id === jurusan.id);
                    if (index !== -1) {
                        jurusanData[index] = jurusan;
                    }
                }
                
                // Save to localStorage
                localStorage.setItem('jurusanData', JSON.stringify(jurusanData));
                
                // Update UI
                updateJurusanSidebar();
                
                hideLoading();
                showNotification('Jurusan berhasil disimpan!');
                
                // Go back to main page
                showPage(mainPage);
            }, 1000);
        }

        function saveMataKuliah(mataKuliah) {
            showLoading();
            
            // Simulate server delay
            setTimeout(() => {
                // Generate ID if new mata kuliah
                if (!mataKuliah.id) {
                    mataKuliah.id = Date.now().toString();
                    mataKuliahData.push(mataKuliah);
                } else {
                    // Update existing mata kuliah
                    const index = mataKuliahData.findIndex(mk => mk.id === mataKuliah.id);
                    if (index !== -1) {
                        mataKuliahData[index] = mataKuliah;
                    }
                }
                
                // Save to localStorage
                localStorage.setItem('mataKuliahData', JSON.stringify(mataKuliahData));
                
                hideLoading();
                showNotification('Mata kuliah berhasil disimpan!');
                
                // Go back to main page
                showPage(mainPage);
            }, 1000);
        }

        function deleteJurusan(jurusanId) {
            if (!confirm('Apakah Anda yakin ingin menghapus jurusan ini? Semua mata kuliah terkait juga akan dihapus.')) {
                return;
            }
            
            showLoading();
            
            // Simulate server delay
            setTimeout(() => {
                // Remove jurusan
                jurusanData = jurusanData.filter(jurusan => jurusan.id !== jurusanId);
                
                // Remove related mata kuliah
                mataKuliahData = mataKuliahData.filter(mk => mk.jurusanId !== jurusanId);
                
                // Save to localStorage
                localStorage.setItem('jurusanData', JSON.stringify(jurusanData));
                localStorage.setItem('mataKuliahData', JSON.stringify(mataKuliahData));
                
                // Update UI
                updateJurusanList();
                updateViewJurusanList();
                updateJurusanSidebar();
                
                hideLoading();
                showNotification('Jurusan berhasil dihapus!');
            }, 1000);
        }

        function deleteMataKuliah(mataKuliahId) {
            if (!confirm('Apakah Anda yakin ingin menghapus mata kuliah ini?')) {
                return;
            }
            
            showLoading();
            
            // Simulate server delay
            setTimeout(() => {
                // Remove mata kuliah
                mataKuliahData = mataKuliahData.filter(mk => mk.id !== mataKuliahId);
                
                // Save to localStorage
                localStorage.setItem('mataKuliahData', JSON.stringify(mataKuliahData));
                
                // Update UI
                displayMataKuliah(document.querySelector('.semester-tab.active').dataset.semester);
                
                hideLoading();
                showNotification('Mata kuliah berhasil dihapus!');
            }, 1000);
        }

        function setupEventListeners() {
            // Main Page Buttons
            document.getElementById('inputBtn').addEventListener('click', () => showPage(inputOptionsPage));
            document.getElementById('viewBtn').addEventListener('click', () => {
                updateViewJurusanList();
                showPage(viewOptionsPage);
            });
            
            // Input Options Page Buttons
            document.getElementById('existingInputBtn').addEventListener('click', () => {
                updateJurusanList();
                showPage(existingJurusanPage);
            });
            document.getElementById('newJurusanBtn').addEventListener('click', () => showPage(newJurusanPage));
            
            // New Jurusan Form
            document.getElementById('newJurusanForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const namaJurusan = document.getElementById('namaJurusan').value;
                const kodeJurusan = document.getElementById('kodeJurusan').value;
                const fakultasJurusan = document.getElementById('fakultasJurusan').value;
                const logoPreview = document.getElementById('logoPreview');
                const logo = logoPreview.querySelector('img') ? logoPreview.querySelector('img').src : null;
                
                const jurusan = {
                    id: null, // Will be generated in saveJurusan
                    nama: namaJurusan,
                    kode: kodeJurusan,
                    fakultas: fakultasJurusan,
                    logo: logo
                };
                
                saveJurusan(jurusan);
            });
            
            // Logo upload
            document.getElementById('logoUploadBtn').addEventListener('click', function() {
                document.getElementById('logoJurusan').click();
            });
            
            document.getElementById('logoJurusan').addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const logoPreview = document.getElementById('logoPreview');
                        logoPreview.innerHTML = `<img src="${e.target.result}" alt="Logo Preview">`;
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Existing Jurusan Search
            document.getElementById('searchJurusan').addEventListener('input', updateJurusanList);
            
            // No Jurusan Button
            document.getElementById('noJurusanBtn').addEventListener('click', () => showPage(newJurusanPage));
            
            // Mata Kuliah Form
            document.getElementById('mataKuliahForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const namaMataKuliah = document.getElementById('namaMataKuliah').value;
                const semesterMataKuliah = document.getElementById('semesterMataKuliah').value;
                const sksMataKuliah = document.getElementById('sksMataKuliah').value;
                const bahanKajian = document.getElementById('bahanKajian').value;
                const cpmk = document.getElementById('cpmk').value;
                const metodePembelajaran = document.getElementById('metodePembelajaran').value;
                const modalitasPembelajaran = document.getElementById('modalitasPembelajaran').value;
                
                const mataKuliah = {
                    id: null, // Will be generated in saveMataKuliah
                    jurusanId: currentJurusan.id,
                    nama: namaMataKuliah,
                    semester: semesterMataKuliah,
                    sks: sksMataKuliah,
                    bahanKajian: bahanKajian,
                    cpmk: cpmk,
                    metodePembelajaran: metodePembelajaran,
                    modalitasPembelajaran: modalitasPembelajaran
                };
                
                saveMataKuliah(mataKuliah);
            });
            
            // View Jurusan Search
            document.getElementById('searchViewJurusan').addEventListener('input', updateViewJurusanList);
            
            // Add Mata Kuliah Button
            document.getElementById('addMataKuliahBtn').addEventListener('click', function() {
                selectJurusan(currentJurusan);
            });
            
            // Back Button
            backBtn.addEventListener('click', function() {
                const currentPage = document.querySelector('[style="display: block;"]');
                
                if (currentPage === inputOptionsPage || currentPage === viewOptionsPage) {
                    showPage(mainPage);
                } else if (currentPage === newJurusanPage || currentPage === existingJurusanPage) {
                    showPage(inputOptionsPage);
                } else if (currentPage === mataKuliahInputPage) {
                    showPage(existingJurusanPage);
                } else if (currentPage === viewJurusanDetailsPage) {
                    showPage(viewOptionsPage);
                } else {
                    showPage(mainPage);
                }
            });
            
            // Burger Menu
            burgerMenu.addEventListener('click', toggleSidebar);
            overlay.addEventListener('click', toggleSidebar);
            
            // Sidebar navigation
            document.getElementById('sidebarHome').addEventListener('click', function() {
                toggleSidebar();
                showPage(mainPage);
            });
            
            document.getElementById('sidebarInput').addEventListener('click', function() {
                toggleSidebar();
                showPage(inputOptionsPage);
            });
            
            document.getElementById('sidebarView').addEventListener('click', function() {
                toggleSidebar();
                updateViewJurusanList();
                showPage(viewOptionsPage);
            });
        }

        // Add sample data if none exists
        if (jurusanData.length === 0) {
            // Sample jurusan data
            const sampleJurusan = [
                {
                    id: '1',
                    nama: 'Teknik Informatika',
                    kode: 'TI01',
                    fakultas: 'Fakultas Ilmu Komputer',
                    logo: null
                },
                {
                    id: '2',
                    nama: 'Sistem Informasi',
                    kode: 'SI01',
                    fakultas: 'Fakultas Ilmu Komputer',
                    logo: null
                }
            ];
            
            // Sample mata kuliah data
            const sampleMataKuliah = [
                {
                    id: '1',
                    jurusanId: '1',
                    nama: 'Pemrograman Web',
                    semester: '3',
                    sks: '3',
                    bahanKajian: 'HTML, CSS, JavaScript, PHP, Database',
                    cpmk: 'Mahasiswa mampu membangun aplikasi web dinamis',
                    metodePembelajaran: 'Project based learning, tutorial, praktikum',
                    modalitasPembelajaran: 'Tatap muka, online, praktikum lab'
                },
                {
                    id: '2',
                    jurusanId: '1',
                    nama: 'Algoritma dan Pemrograman',
                    semester: '1',
                    sks: '4',
                    bahanKajian: 'Dasar algoritma, struktur data, pemrograman dasar',
                    cpmk: 'Mahasiswa mampu memahami dan menerapkan algoritma dasar',
                    metodePembelajaran: 'Ceramah, diskusi, praktikum',
                    modalitasPembelajaran: 'Tatap muka, praktikum lab'
                },
                {
                    id: '3',
                    jurusanId: '2',
                    nama: 'Basis Data',
                    semester: '2',
                    sks: '3',
                    bahanKajian: 'SQL, database design, normalisasi',
                    cpmk: 'Mahasiswa mampu merancang dan mengimplementasikan database',
                    metodePembelajaran: 'Ceramah, praktikum, studi kasus',
                    modalitasPembelajaran: 'Tatap muka, praktikum lab'
                }
            ];
            
            // Save sample data to localStorage
            localStorage.setItem('jurusanData', JSON.stringify(sampleJurusan));
            localStorage.setItem('mataKuliahData', JSON.stringify(sampleMataKuliah));
            
            // Update variables
            jurusanData = sampleJurusan;
            mataKuliahData = sampleMataKuliah;
        }
    </script>
</body>
</html>